import React,{useContext,useEffect,useState}from"../../../esm.sh/react.js";import{RouterContext}from"./context.js";import{AsyncUseDenoError}from"./error.js";import events from"./events.js";export function useRouter(){return useContext(RouterContext)}export function useDeno(e,t,n){const o=arguments[3];const{pathname:r,query:s}=useRouter();const[u,c]=useState(()=>{const t=window;const n=`useDeno://${r}?${s.toString()}`;const{[`__asyncData_${n}`]:u}=t;const c=`${n}#${o}`;if(u&&c in u){return u[c]}else if(typeof Deno!=="undefined"&&Deno.version.deno){const t=e();if(t instanceof Promise){events.emit(n,o,t.then(e=>{if(u){u[c]=e}events.emit(n,o,e)}),true);throw new AsyncUseDenoError("async useDeno")}else{if(u){u[c]=t}events.emit(n,o,t);return t}}return t[c]||null});useEffect(()=>{if(t){const t=e();if(t instanceof Promise){t.then(c)}else{c(t)}}},n);return u}export function withDeno(e,t,n){return function(o){return function r(s){const u=useDeno(e,t,n);if(typeof u==="object"){return React.createElement(o,Object.assign(Object.assign({},s),u))}return React.createElement(o,s)}}}